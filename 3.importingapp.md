## Import Application and Adding a Business App

We are going to use a prebuilt process app for this hands-on lab and extend it by adding a Business App (to change the process of waiver)

### Adding a Business Application

**Make sure you are logged into cloud.tibco.com**

We would need to start by activating the copy of business app shared to you on email. Click Activate

<img src="/images/laactivate/1.png" alt="laactivate" width=700/>

Once activated, the app needs to complete a test before it can be published for wider use. Close the Prompt > Click on "Test Application" and Do not close the Prompt.

<img src="/images/laactivate/2.png" alt="laactivate" width=700/>

In order to test further , we have to create a case for the business app.  Click New

<img src="/images/laactivate/3.png" alt="laactivate" width=700/>

Add values to shipping amount and Hit Submit.

<img src="/images/laactivate/4.png" alt="laactivate" width=700/>


A new case for the business app we have imported will be created . Close the Prompt and Open the case..

<img src="/images/laactivate/5.png" alt="laactivate" width=400/>&nbsp;&nbsp;<img src="/images/laactivate/6.png" alt="laactivate" width=400/>

An Action has to be taken for this case , Click on "Waive" button to activate flow for this action .
<img src="/images/laactivate/7.png" alt="laactivate" width=700/>

Select the value as "Yes" and hit Submit to complete the flow of this action and observe the End state for the case changes to Waived.

<img src="/images/laactivate/8.png" alt="laactivate" width=400/>&nbsp;<img src="/images/laactivate/9.png" alt="laactivate" width=400/>

The testing is completed by now and we are ready to publish the Business App for connecting it via  "Process App".
Change the perspective to "Designer" to be able to "Lock the app for publication". Do not close the prompt.

<img src="/images/laactivate/10.png" alt="laactivate" width=500/>

Click Open the business app which is in draft status

<img src="/images/laactivate/11.png" alt="laactivate" width=700/>

and, hit "Lock for Publication"..

<img src="/images/laactivate/12.png" alt="laactivate" width=700/>

The Business is now locked and ready to be published , Click the "administration" link from the success message..

<img src="/images/laactivate/13.png" alt="laactivate" width=700/>

The business app is now ready for publication . Hit Publish ..

<img src="/images/laactivate/14.png" alt="laactivate" width=700/>

The business app is now published and ready to be consumed in the process application.  observe the change of state.
<img src="/images/laactivate/15.png" alt="laactivate" width=700/>

We will now Import our prebuilt process app to complete rest of the lab.

### Importing a Prebuilt Process Application

1. Change the perspective to TIBCO cloud Integration and select flogo. Under Apps > Hit create > Enter the name of the app and hit create again.

<img src="/images/appimp/1.png" alt="appimp" width=700/>

2. Select and Click on “Create a TIBCO flogo App” to create a new empty flow.

<img src="/images/appimp/2.png" alt="appimp" width=400/>

3. On the app details page, click Import App. In next page Navigate to or drag and drop the .json file for the app that you want to import. Click Upload.  The process app .json file can be downloaded from here  
`https://github.com/git-akurian/TIBCO-Cloud-Integration-Virtual-Workshop/blob/master/project/apiimplementation/tci_wkshop_particpants_app.json`

<img src="/images/appimp/3.png" alt="appimp" width=400/>&nbsp;&nbsp;<img src="/images/appimp/4.png" alt="appimp" width=400/>

4. The Import app dialog displays some generic errors and warnings as well as any specific errors or warnings pertaining to the app you are importing. It validates whether all the activities and triggers used in the app are available in the Extensions tab.

<img src="/images/appimp/5.png" alt="appimp" width=700/>

5. The app will be imported successfully and Click on the imported app to build further flow.

<img src="/images/appimp/6.png" alt="appimp" width=850/>

6. The flow will be opened in the canvas and notice the errors with some of the activities.

<img src="/images/appimp/7.png" alt="appimp" width=850/>

7. In order to correct the error on fetch customer details activity, under settings connect to your mysql connection created earlier and perform “Click and tab for flow activity to connect back to mysql connection without error > Save and Close.

<img src="/images/appimp/11.png" alt="appimp" width=700/>

8.  Observe the error on the next 2 activities which need to be completed on the flow .  These 2 activities are connected to Auto-approve  “Waive Shipment flow” residing in “Low - Code Process flow”.  Click  > Create Shipment Waiver Case and fill-in Application & Case Creator Field to wire the “Low Code Process flow”. The business app was Activated and published earlier to be used in here.

<img src="/images/appimp/12.png" alt="appimp" width=700/>


Once Selected save and Close the activity dialog.


9. Similarly, Correct the “LiveAppsPerfromCaseAction” activity as below.

<img src="/images/appimp/13.png" alt="appimp" width=700/>

10 . Once the Application is Error Free,  hit the Push button to make it publicly available to Test

<img src="/images/appimp/14.png" alt="appimp" width=700/>

It will be pushed successfully

<img src="/images/appimp/15.png" alt="appimp" width=700/>

Congratulations ! Your app is now fully configured and published for anyone to test and Use.
Lets Start Testing the same .

<img src="/images/appimp/13.png" alt="appimp" width=700/>
<img src="/images/appimp/14.png" alt="appimp" width=700/>
<img src="/images/appimp/15.png" alt="appimp" width=700/>
<img src="/images/appimp/16.png" alt="appimp" width=700/>
<img src="/images/appimp/17.png" alt="appimp" width=700/>
<img src="/images/appimp/18.png" alt="appimp" width=700/>


### Start Testing

In this section we will test **itineraries API** implementation.

1)	Select Start testing.
2)	Select Create a Launch Configuration.
3)	Expand Activity Input flowInputs->pathParams->reservationid.  And enter ‘AAAAA11111’ into flowInputs.  Use quotes.  Select Next. Select Run.
4)	Your Testing is complete.  Scroll down to see the response and confirm that aircraft details were added to the response.
5)	Select Stop Testing. Cancel.

### Push App

In this section we are going to push the itineraries app to the cloud and test the live endpoints.

1)	Select Push app.
2)	The itineraries app with be pushed to the cloud and you will see a progress bar and a completion message.
3)	Test your live endpoint by selecting Endpoint, select View and Test.
4)	Enter AAAAA11111 for reserverationid input parameter and select Try it out!

### Summary
In this exercise you imported an application and extended by reusing **aircrafts API**.  You performed a local test and pushed the application to the cloud.  You finshed by testing the application's live endpoints.

Next step: [Pushing the App](3.TCE.md)
