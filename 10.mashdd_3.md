# Exposing the Definition as an Application in Mashery
While we work with the workshop we will need to know what the Mashery UserID is. This ID is created for you when you sign up for the TCI Trial. In order to find your UserID simply do the following:
From the Control Center Click Manage and then Users as shown below:
![MASHDD3](/images/mashdd3/1.png)

This will bring you to the list of Users in your Mashery Portal
![MASHDD3](/images/mashdd3/2.png)

We will now generate an Application in Mashery to use our API Definition with the Package and Plan that we created from the previous steps.
Click on Applications and then New Application as shown below:
![MASHDD3](/images/mashdd3/3.png)
![MASHDD3](/images/mashdd3/4.png)

Enter an Application Name and click Save and Continue. Application Owner will be the username from the ‘Users’ tab and should have been automatically brought it in here.
![MASHDD3](/images/mashdd3/5.png)
Select ‘BasicPackage’ followed by the plan ‘StandardPlan’ that were created earlier.
![MASHDD3](/images/mashdd3/6.png)

Then click on the ‘+’ sign so that the Package and Plan are assigned
![MASHDD3](/images/mashdd3/7.png)

Click Save and continue:
![MASHDD3](/images/mashdd3/7.1.png)

Since we have enabled Self Service of Keys, you will be able to see this as ‘Waiting’ status under the Package Keys section.
![MASHDD3](/images/mashdd3/8.png)
Click on ‘Waiting’
![MASHDD3](/images/mashdd3/9.png)
![MASHDD3](/images/mashdd3/10.png)
The Status will change to ‘Green’ - Enabled because of the self provisioning and you can review the Throttle and Quota values that are applied from the plan that was chosen for this application.
You can copy this key for testing later.
Also copy the Public Endpoint URL from the 'Design->shipmentwaiverAPI' section as shown
![MASHDD3](/images/mashdd3/11.png)

Congratulations, you have successfully deployed an API Definition that can be accessed via the API Gateway which will inturn use the microservice that was developed inside of the TCI.

<img src="/images/poll.png" alt="poll" width=30 height=30 style="float:right"/> 

## Testing the Shipment Waiver Applications

We will try to hit the endpoint we exposed on Mashery that will inturn invoke the microservice running in TCI - Flogo using an external application like 'Postman'

Postman related screenshots to trigger the tests are shown below:
![MASHDD3](/images/mashdd3/10.1.png)
![MASHDD3](/images/mashdd3/10.2.png)
![MASHDD3](/images/mashdd3/10.3.png)
Here is the sample you can paste in Postman
`{
  "customer": {
    "loginid": "akurian@tibco.com"
  },
  "order": {
    "Total amount": 20,
    "id": "or_123",
    "shipping amount": 10
  }
}`
A successfull test will return as shown below:
![MASHDD3](/images/mashdd3/10.4.png)

You can review the activity on Mashery from the 'Analyze->Report' section as shown
![MASHDD3](/images/mashdd3/14.png)

You can also review the logs from the underlying microservice developed in Flogo by referring the logs section, as shown below.
![MASHDD3](/images/mashdd3/13.png)

This means, we have successfully changed an order process where a part of the customer order information will be interacting with the new Shipment Waiver application API which will dynamically decide if the customer is a loyal customer and if his order qualifies for a special process to waive the shipping fee.

The entire process is now automated providing a business leverage and enhanced customer experience.

Let's Recap: [Summary](20.summary.md)
